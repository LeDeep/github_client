require 'spec_helper'

describe Gist do 

  gist = {:public => 'true', :description => 'a test gist'}

  let(:response_body) { [{"url"=>"https://api.github.com/gists/5191185", "forks_url"=>"https://api.github.com/gists/5191185/forks", "commits_url"=>"https://api.github.com/gists/5191185/commits", "id"=>"5191185", "git_pull_url"=>"https://gist.github.com/5191185.git", "git_push_url"=>"https://gist.github.com/5191185.git", "html_url"=>"https://gist.github.com/5191185", "files"=>{"bam.rb"=>{"filename"=>"bam.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/5191185/ca8770adfefdee051725c3e38f2aee2bc1952ad0/bam.rb", "size"=>10}, "boom.rb"=>{"filename"=>"boom.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/5191185/3800bd7b4ec6e13426ca346fe2985a33b31465fc/boom.rb", "size"=>11}}, "public"=>true, "created_at"=>"2013-03-18T21:57:07Z", "updated_at"=>"2013-03-18T21:57:08Z", "description"=>"", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/5191185/comments"}, {"url"=>"https://api.github.com/gists/4758536", "forks_url"=>"https://api.github.com/gists/4758536/forks", "commits_url"=>"https://api.github.com/gists/4758536/commits", "id"=>"4758536", "git_pull_url"=>"https://gist.github.com/4758536.git", "git_push_url"=>"https://gist.github.com/4758536.git", "html_url"=>"https://gist.github.com/4758536", "files"=>{"dictionary.rb"=>{"filename"=>"dictionary.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4758536/c89a6c4b53f291386a343002e8044ff87800d8b0/dictionary.rb", "size"=>391}}, "public"=>true, "created_at"=>"2013-02-11T23:17:29Z", "updated_at"=>"2013-02-11T23:17:30Z", "description"=>"create your own dictionary", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4758536/comments"}, {"url"=>"https://api.github.com/gists/4758367", "forks_url"=>"https://api.github.com/gists/4758367/forks", "commits_url"=>"https://api.github.com/gists/4758367/commits", "id"=>"4758367", "git_pull_url"=>"https://gist.github.com/4758367.git", "git_push_url"=>"https://gist.github.com/4758367.git", "html_url"=>"https://gist.github.com/4758367", "files"=>{"parcel.rb"=>{"filename"=>"parcel.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4758367/5ad5203d0fc41325e877d929476dcd82ac09a28c/parcel.rb", "size"=>2049}}, "public"=>true, "created_at"=>"2013-02-11T22:50:36Z", "updated_at"=>"2013-02-11T22:50:37Z", "description"=>"Shipping cost estimator. ", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4758367/comments"}, {"url"=>"https://api.github.com/gists/4676004", "forks_url"=>"https://api.github.com/gists/4676004/forks", "commits_url"=>"https://api.github.com/gists/4676004/commits", "id"=>"4676004", "git_pull_url"=>"https://gist.github.com/4676004.git", "git_push_url"=>"https://gist.github.com/4676004.git", "html_url"=>"https://gist.github.com/4676004", "files"=>{"dice.rb"=>{"filename"=>"dice.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4676004/777375a701deefc63fe85f583ded1388ce4fe988/dice.rb", "size"=>169}}, "public"=>true, "created_at"=>"2013-01-30T19:30:28Z", "updated_at"=>"2013-01-30T19:30:29Z", "description"=>"roll it out", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4676004/comments"}, {"url"=>"https://api.github.com/gists/4675990", "forks_url"=>"https://api.github.com/gists/4675990/forks", "commits_url"=>"https://api.github.com/gists/4675990/commits", "id"=>"4675990", "git_pull_url"=>"https://gist.github.com/4675990.git", "git_push_url"=>"https://gist.github.com/4675990.git", "html_url"=>"https://gist.github.com/4675990", "files"=>{"book.rb"=>{"filename"=>"book.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4675990/ec49f93f83e57b69398ad20ed311d08d5e2f7495/book.rb", "size"=>319}}, "public"=>true, "created_at"=>"2013-01-30T19:29:11Z", "updated_at"=>"2013-01-30T19:29:12Z", "description"=>"book titles...", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4675990/comments"}, {"url"=>"https://api.github.com/gists/4669170", "forks_url"=>"https://api.github.com/gists/4669170/forks", "commits_url"=>"https://api.github.com/gists/4669170/commits", "id"=>"4669170", "git_pull_url"=>"https://gist.github.com/4669170.git", "git_push_url"=>"https://gist.github.com/4669170.git", "html_url"=>"https://gist.github.com/4669170", "files"=>{"fibonacci2.rb"=>{"filename"=>"fibonacci2.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4669170/972525d5d54447cbeb14537d248ab60daba432b1/fibonacci2.rb", "size"=>664}}, "public"=>true, "created_at"=>"2013-01-29T23:52:28Z", "updated_at"=>"2013-01-29T23:52:29Z", "description"=>"Integer'ed in your face...", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4669170/comments"}, {"url"=>"https://api.github.com/gists/4669142", "forks_url"=>"https://api.github.com/gists/4669142/forks", "commits_url"=>"https://api.github.com/gists/4669142/commits", "id"=>"4669142", "git_pull_url"=>"https://gist.github.com/4669142.git", "git_push_url"=>"https://gist.github.com/4669142.git", "html_url"=>"https://gist.github.com/4669142", "files"=>{"in_words.rb"=>{"filename"=>"in_words.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4669142/9fc928e21cf4841cfee5afa9db36a0136e6ebc54/in_words.rb", "size"=>5031}}, "public"=>true, "created_at"=>"2013-01-29T23:50:06Z", "updated_at"=>"2013-01-29T23:50:07Z", "description"=>"numbers => words", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4669142/comments"}, {"url"=>"https://api.github.com/gists/4660278", "forks_url"=>"https://api.github.com/gists/4660278/forks", "commits_url"=>"https://api.github.com/gists/4660278/commits", "id"=>"4660278", "git_pull_url"=>"https://gist.github.com/4660278.git", "git_push_url"=>"https://gist.github.com/4660278.git", "html_url"=>"https://gist.github.com/4660278", "files"=>{"fibonacci.rb"=>{"filename"=>"fibonacci.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4660278/2cdc4eb36550402a4b4872cce0d6624164841bd2/fibonacci.rb", "size"=>429}}, "public"=>true, "created_at"=>"2013-01-28T23:30:25Z", "updated_at"=>"2013-01-28T23:30:26Z", "description"=>"0.1.1.2.3....infinity ", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4660278/comments"}, {"url"=>"https://api.github.com/gists/4629917", "forks_url"=>"https://api.github.com/gists/4629917/forks", "commits_url"=>"https://api.github.com/gists/4629917/commits", "id"=>"4629917", "git_pull_url"=>"https://gist.github.com/4629917.git", "git_push_url"=>"https://gist.github.com/4629917.git", "html_url"=>"https://gist.github.com/4629917", "files"=>{"factorial_method2.rb"=>{"filename"=>"factorial_method2.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4629917/7e786ab4c1a3a8dfa26ea0b019d0ec7b7a54876c/factorial_method2.rb", "size"=>305}}, "public"=>true, "created_at"=>"2013-01-24T23:58:35Z", "updated_at"=>"2013-01-25T00:06:08Z", "description"=>"! boom !", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4629917/comments"}, {"url"=>"https://api.github.com/gists/4627878", "forks_url"=>"https://api.github.com/gists/4627878/forks", "commits_url"=>"https://api.github.com/gists/4627878/commits", "id"=>"4627878", "git_pull_url"=>"https://gist.github.com/4627878.git", "git_push_url"=>"https://gist.github.com/4627878.git", "html_url"=>"https://gist.github.com/4627878", "files"=>{"abc_menu.rb"=>{"filename"=>"abc_menu.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4627878/4cdba1b3c60328dabe95f2412b0405820a2f68c6/abc_menu.rb", "size"=>196}}, "public"=>true, "created_at"=>"2013-01-24T21:22:18Z", "updated_at"=>"2013-01-24T21:22:19Z", "description"=>"abc menu", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4627878/comments"}, {"url"=>"https://api.github.com/gists/4626419", "forks_url"=>"https://api.github.com/gists/4626419/forks", "commits_url"=>"https://api.github.com/gists/4626419/commits", "id"=>"4626419", "git_pull_url"=>"https://gist.github.com/4626419.git", "git_push_url"=>"https://gist.github.com/4626419.git", "html_url"=>"https://gist.github.com/4626419", "files"=>{"factorial.rb"=>{"filename"=>"factorial.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4626419/aeda4e62ae418786a646f6d11a509e6254b9ba62/factorial.rb", "size"=>356}}, "public"=>true, "created_at"=>"2013-01-24T18:54:11Z", "updated_at"=>"2013-01-25T00:21:34Z", "description"=>"big numbers!!!", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4626419/comments"}, {"url"=>"https://api.github.com/gists/4615945", "forks_url"=>"https://api.github.com/gists/4615945/forks", "commits_url"=>"https://api.github.com/gists/4615945/commits", "id"=>"4615945", "git_pull_url"=>"https://gist.github.com/4615945.git", "git_push_url"=>"https://gist.github.com/4615945.git", "html_url"=>"https://gist.github.com/4615945", "files"=>{"title_case.rb"=>{"filename"=>"title_case.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4615945/a401a8d06fe6c4d82fd6ad1418e58b2a5d5be0bb/title_case.rb", "size"=>222}}, "public"=>true, "created_at"=>"2013-01-23T23:53:39Z", "updated_at"=>"2013-01-23T23:53:40Z", "description"=>"Caps On", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4615945/comments"}, {"url"=>"https://api.github.com/gists/4614923", "forks_url"=>"https://api.github.com/gists/4614923/forks", "commits_url"=>"https://api.github.com/gists/4614923/commits", "id"=>"4614923", "git_pull_url"=>"https://gist.github.com/4614923.git", "git_push_url"=>"https://gist.github.com/4614923.git", "html_url"=>"https://gist.github.com/4614923", "files"=>{"triangle.rb"=>{"filename"=>"triangle.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4614923/8af370de350e581003ba6f21627e7501fe54f8a1/triangle.rb", "size"=>579}}, "public"=>true, "created_at"=>"2013-01-23T22:29:57Z", "updated_at"=>"2013-01-23T22:29:58Z", "description"=>"3 angles", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4614923/comments"}, {"url"=>"https://api.github.com/gists/4610735", "forks_url"=>"https://api.github.com/gists/4610735/forks", "commits_url"=>"https://api.github.com/gists/4610735/commits", "id"=>"4610735", "git_pull_url"=>"https://gist.github.com/4610735.git", "git_push_url"=>"https://gist.github.com/4610735.git", "html_url"=>"https://gist.github.com/4610735", "files"=>{"leap_year?.rb"=>{"filename"=>"leap_year?.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4610735/19d47ba05c1526de698d6e0960811d069e6168f4/leap_year?.rb", "size"=>346}}, "public"=>true, "created_at"=>"2013-01-23T17:37:09Z", "updated_at"=>"2013-01-23T17:37:10Z", "description"=>"Leap Year Calculator", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4610735/comments"}, {"url"=>"https://api.github.com/gists/4610683", "forks_url"=>"https://api.github.com/gists/4610683/forks", "commits_url"=>"https://api.github.com/gists/4610683/commits", "id"=>"4610683", "git_pull_url"=>"https://gist.github.com/4610683.git", "git_push_url"=>"https://gist.github.com/4610683.git", "html_url"=>"https://gist.github.com/4610683", "files"=>{"translate_into_pig_latin.rb"=>{"filename"=>"translate_into_pig_latin.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4610683/39b81d957ee7b2253bec9d7e6a463aaea0e59547/translate_into_pig_latin.rb", "size"=>1038}}, "public"=>true, "created_at"=>"2013-01-23T17:34:26Z", "updated_at"=>"2013-01-24T01:45:38Z", "description"=>"appleay", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4610683/comments"}, {"url"=>"https://api.github.com/gists/4596689", "forks_url"=>"https://api.github.com/gists/4596689/forks", "commits_url"=>"https://api.github.com/gists/4596689/commits", "id"=>"4596689", "git_pull_url"=>"https://gist.github.com/4596689.git", "git_push_url"=>"https://gist.github.com/4596689.git", "html_url"=>"https://gist.github.com/4596689", "files"=>{"favorite_number?.rb"=>{"filename"=>"favorite_number?.rb", "type"=>"application/ruby", "language"=>"Ruby", "raw_url"=>"https://gist.github.com/raw/4596689/4facf2f68a2ed32a134757719bde9890eae29446/favorite_number?.rb", "size"=>367}}, "public"=>true, "created_at"=>"2013-01-22T17:59:36Z", "updated_at"=>"2013-01-22T17:59:37Z", "description"=>"Lucky # 13", "comments"=>0, "user"=>{"login"=>"pjlowry", "id"=>3334673, "avatar_url"=>"https://secure.gravatar.com/avatar/66f75c87224add7ab916f0891d60695e?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", "gravatar_id"=>"66f75c87224add7ab916f0891d60695e", "url"=>"https://api.github.com/users/pjlowry", "html_url"=>"https://github.com/pjlowry", "followers_url"=>"https://api.github.com/users/pjlowry/followers", "following_url"=>"https://api.github.com/users/pjlowry/following", "gists_url"=>"https://api.github.com/users/pjlowry/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/pjlowry/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/pjlowry/subscriptions", "organizations_url"=>"https://api.github.com/users/pjlowry/orgs", "repos_url"=>"https://api.github.com/users/pjlowry/repos", "events_url"=>"https://api.github.com/users/pjlowry/events{/privacy}", "received_events_url"=>"https://api.github.com/users/pjlowry/received_events", "type"=>"User"}, "comments_url"=>"https://api.github.com/gists/4596689/comments"}].to_s }


  context '.create' do 
    it 'Posts a new Gist to the user\'s account' do 
      stub = stub_request(:post, "https://#{$github_username}:#{$github_password}@api.github.com/gists").with(:body => gist.to_json)
      Gist.create(gist)
      stub.should have_been_requested
    end
  end

    
  context '#initialize' do 
    it 'returns an instance of a gist object' do
      Gist.new(gist).should be_an_instance_of Gist
    end 
  end

 
  context '#public_status' do 
    it 'returns true if gist is public' do 
      gist = {:public => 'true', :description => 'a test gist'}
      gist_file = Gist.new(gist)
      gist_file.public_status.should be_true
     end
  end


  context '#description' do 
    it 'returns the description for a gist' do
      gist = {:public => 'true', :description => 'a test gist'}
      gist_file = Gist.new(gist)
      gist_file.description.should eq 'a test gist'
    end
  end


  context '.list_file' do
    it 'lists all filenames of user gists' do 
      username = 'pjlowry'
      stub = stub_request(:get, "https://api.github.com/users/#{username}/gists").to_return(:status => 200, :body => response_body)
      Gist.list_file(username)
      stub.should have_been_requested
    end
  end

  context '.delete' do
    it 'deletes a users gist' do
      id = 5191656
      stub = stub_request(:delete, "https://api.github.com/gists/#{id}")
      Gist.delete(id)
      stub.should have_been_requested
    end
  end

  context '.edit_description' do 
    it 'allows user to edit their gist' do 
      id = 5191185
      stub = stub_request(:patch, "https://api.github.com/gists/#{id}").with(:description => 'bam bam bam')
      Gist.edit_description(id, 'bam bam bam')
      stub.should have_been_requested
    end
  end

  context '.edit_filename' do
    it 'allows a user to edit his gist filename' do
      id = 5191185
      stub = stub_request(:patch, "https://api.github.com/gists/#{id}").with(:files => 'ninjas')
      Gist.edit_filename(id, 'ninjas')
      stub.should have_been_requested
    end
  end
end